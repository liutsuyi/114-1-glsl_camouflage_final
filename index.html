<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>GlslCanvas</title>
  <script type="text/javascript"
    src="dist/GlslCanvas.js"></script>
  <style>
    body {
      background: #101515;
    }

    #glslCanvas {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
  </style>
</head>

<body>
  <canvas id="glslCanvas" data-fragment-url="shader/environment_v1.frag" width="900" height="600"
    data-textures="data/1_Foreground_alpha.png,data/2_Mid-Foreground_alpha.png,data/3_Midground_alpha.png,data/4_Back-Midground_alpha.png,data/5_Background.png"></canvas>

  <!-- UI: focus & max blur sliders -->
  <div id="ui" style="position:fixed;right:18px;top:18px;color:#fff;font-family:sans-serif;z-index:10">
    <div style="margin-bottom:8px">
      <label>Focus: <input id="focusSlider" type="range" min="0" max="1" step="0.01" value="0.0"></label>
    </div>
    <div>
      <label>Max Blur: <input id="maxBlurSlider" type="range" min="0" max="1" step="0.01" value="0.5"></label>
    </div>
    <div style="margin-top:8px">
      <label><input id="debugMask" type="checkbox"> Show Masks (debug)</label>
    </div>
  </div>
</body>
<script>
  var canvas = document.getElementById("glslCanvas");
  var sandbox = new GlslCanvas(canvas);
  var texCounter = 0;
  var sandbox_content = "";
  var sandbox_title = "";
  var sandbox_author = "";
  var sandbox_thumbnail = "";

  // UI bindings for focus and blur
  var focusSlider = document.getElementById('focusSlider');
  var maxBlurSlider = document.getElementById('maxBlurSlider');

  function updateUniforms(){
    // focus: 0 = front in focus, 1 = back in focus
    sandbox.setUniform('u_focus', parseFloat(focusSlider.value));
    // max blur scale: 0..1 mapped in shader to a sensible pixel radius
    sandbox.setUniform('u_maxBlur', parseFloat(maxBlurSlider.value));
    sandbox.setUniform('u_debug', document.getElementById('debugMask').checked ? 1.0 : 0.0);
  }

  focusSlider.addEventListener('input', updateUniforms);
  maxBlurSlider.addEventListener('input', updateUniforms);
  document.getElementById('debugMask').addEventListener('change', updateUniforms);
  // set initial values
  updateUniforms();
</script>

</html>